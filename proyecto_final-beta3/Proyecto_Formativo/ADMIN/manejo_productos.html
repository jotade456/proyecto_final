<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Administrar Productos</title>
    <link rel="stylesheet" href="estilos.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>

    <!-- NAVBAR -->
    <header class="header__container">
        <nav class="navbar">
            <section class="waveNavbar">
                <div class="wavenav wave1nav"></div>
                <div class="wavenav wave2nav"></div>
                <div class="wavenav wave3nav"></div>
                <div class="wavenav wave4nav"></div>
            </section>
            <div class="navbar-left">
                <div class="logo">
                <img src="../imagenes/LogoRoma2.png" alt="Logo Roma">
                </div>
            </div>
            <div class="navbar-right action">
                    <div class="profile" onclick="menuToggle()">
                        <img id="imgPerfilNav" src="../imagenes/1.jpg" alt="Perfil" />
                    </div>
                    <div class="menu">
                        <h3><span id="nombrePerfil">Nombre</span><br><span id="rolPerfil">Rol</span></h3>
                        <ul>
                            <li><img src="../imagenes/question.png" alt=""><a href="#" onclick="abrirModalPerfil(); cargarDatosPerfil();">Editar Perfil</a></li>
                            <li><img src="../imagenes/log-out.png" alt=""><a href="../inicio_sesion_multiservicios/logout.php">Cerrar Sesión</a></li>
                        </ul>
                    </div>
                </div>

            </div>

        </nav>
    </header>

    <div class="boton-regresar" onclick="location.href='index.php'">
        <i class="fas fa-arrow-left"></i> Volver
    </div>

    <div class="search-input-box">
        <input type="text" id="buscadorCotizar" placeholder="Buscar producto...">
        <a href="#" onclick="event.preventDefault();buscarProductoParaCotizar()">
            <i class="fa-solid fa-magnifying-glass icon"></i>
        </a>
        <ul class="container-suggestions">
        </ul>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="productos-container">
        <div class="productos-header">
        <h2>Listado de productos</h2>
        <div class="productos-controles">
            <input type="text" id="buscadorProducto" placeholder="Buscar producto..." />
            <button onclick="abrirModal()" class="btn-agregar-producto">
            <i class="fas fa-plus"></i> Agregar
            </button>
        </div>
        </div>

        <div class="contenedor-productos" id="contenedorTarjetasProductos">
        <!-- Aquí se insertan las tarjetas con JS -->
        </div>
    </main>

    <!-- OLEADAS DECORATIVAS -->
    <section>
        <div class="wave wave1"></div>
        <div class="wave wave2"></div>
        <div class="wave wave3"></div>
        <div class="wave wave4"></div>
    </section>

    <!-- MODALES -->
    <div id="modales-productos">
        <!-- Aquí se deben insertar los modales: agregar, modificar, eliminar -->
            <!----- MODAL AGREGAR PRODUCTO ----->
        <div class="modal-producto" id="modalProducto">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="back-arrow" onclick="cerrarModal()">&larr;</span>
                    <h2>Agregar Producto</h2>
                </div>
                <div class="modal-body">
                    <form id="formAgregarProducto" class="formulario-producto" enctype="multipart/form-data">
                        
                        <div class="contenedor-formulario">

                            <div class="imagen-box" onclick="document.getElementById('inputImagen').click();">
                                <input name="imagen_producto" type="file" id="inputImagen" onchange="mostrarImagen(event)">
                                <img id="previewImagen" style="display: none;">
                                <p>Haz clic para subir imagen</p>
                            </div>

                            <div class="campos-producto">
                                <label for="nombreProductoAgregar">Nombre del Producto</label>
                                <input name="nombre_producto" type="text" id="nombreProductoAgregar" required>
                                <label for="valorProductoAgregar">Valor del Producto</label>
                                <input name="valor_producto" type="number" id="valorProductoAgregar" required>
                                <button type="submit">Agregar</button>
                            </div>
                        </div>
                    </form>

                    <div class="ventana-emergente" id="ventanaEmergente">
                        <div class="ventana-contenido">
                            <div class="ventana-encabezado">
                                <h2>Agregar producto</h2>
                            </div>
                            <div class="ventana-cuerpo">
                                <p>Producto agregado con éxito</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!---- MODAL MODIFICAR PRODUCTO ---->
        <div class="modal-modificar" id="modalmodificar">
            <div class="modal-content-modificar">
                <div class="modal-header-modificar">
                    <span class="back-arrow" onclick="cerrarModalModificar()">&larr;</span>
                    <h2>Modificar Producto</h2>
                </div>
                <div class="modal-body-modificar">
                    <div class="buscador-modificar">
                        <form id="formBuscarModificar" onsubmit="return false;"method="POST" action="../controlador/controlador.php">
                            <input type="text" name="buscar_nombre" id="inputBuscarModificar" placeholder="Buscar Producto" required>
                            <button type="submit"><i class="fa-solid fa-magnifying-glass icon"></i></button>
                        </form>
                        <ul class="container-suggestions-modificar"></ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-producto-mod" id="modalProductoModificar">
            <div class="modal-content-mod">
                <div class="modal-header-mod">
                    <span class="back-arrow" onclick="cerrarModalMod()">&larr;</span>
                    <h2>Modificar Producto</h2>
                </div>
                <div class="modal-body-mod">
                    <div class="imagen-box-mod" onclick="document.getElementById('inputImagen-mod').click();">
                        <input type="file" id="inputImagen-mod" onchange="mostrarImagenMod(event)">
                        <img id="previewImagen-mod" style="display: none;">
                        <p>Modificar Imagen</p>
                    </div>
                    <form class="formulario-producto-mod" id="formularioModificarProducto" onsubmit="return false;">
                        <input type="hidden" name="id_producto" id="idProducto-mod">
                        <input name="nuevo_nombre" type="text" id="nombreProducto-mod" placeholder="Modificar Nombre" required>
                        <input name="nuevo_valor" type="number" id="valorProducto-mod" placeholder="Modificar Valor" required>
                        <button type="submit">Modificar</button>
                    </form>
                    <div class="ventana-emergente-mod" id="ventanaEmergenteModificar">
                        <div class="ventana-contenido-mod">
                            <div class="ventana-encabezado-mod">
                                <h2>Modificar producto</h2>
                            </div>
                            <div class="ventana-cuerpo-mod">
                                <p>Producto Modificado con éxito</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- MODAL ELIMINAR PRODUCTO -->
        <div class="modal-eliminar" id="modaleliminar">
            <div class="modal-content-eliminar">
                <div class="modal-header-eliminar">
                    <span class="back-arrow" onclick="cerrarModalEliminar()">&larr;</span>
                    <h2>Eliminar Producto</h2>
                </div>
                <div class="modal-body-eliminar">
                    <div class="buscador-eliminar">
                        <form id="formBuscarEliminar" onsubmit="return false;">
                            <input type="text" name="buscar_nombre" id="inputBuscarEliminar" placeholder="Buscar Producto" required>
                            <button type="submit"><i class="fa-solid fa-magnifying-glass icon"></i></button>
                        </form>
                        <ul class="contenedor-sugerencias-eliminar" id="contenedorSugerenciasEliminar"></ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-producto-eli" id="modalProductoEliminar">
            <div class="modal-content-eli">
                <div class="modal-header-eli">
                    <span class="back-arrow" onclick="cerrarModalEli()">&larr;</span>
                    <h2>Eliminar Producto</h2>
                </div>
                <div class="modal-body-eli">
                    <div class="imagen-box-eli">
                        <input type="file" id="inputImagen-eli" disabled onchange="mostrarImagenEli(event)">
                        <img id="previewImagen-eli" style="display: none;">
                        <p>Eliminar Imagen</p>
                    </div>

                    <form id="formularioEliminarProducto" class="formulario-producto-eli" onsubmit="return false;">
                        <input type="hidden" name="eliminar_producto" id="idProducto-eli">
                        <input name="eliminar_nombre" type="text" id="nombreProducto-eli" placeholder="Eliminar Nombre" required>
                        <input name="eliminar_valor" type="number" id="valorProducto-eli" placeholder="Eliminar Valor" required>
                        <button type="submit">Eliminar</button>
                    </form>
                    <div class="ventana-emergente-eli" id="ventanaEmergenteEliminar">
                        <div class="ventana-contenido-eli">
                            <div class="ventana-encabezado-eli">
                                <h2>Eliminar producto</h2>
                            </div>
                            <div class="ventana-cuerpo-eli">
                                <p>Producto Eliminado con éxito</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- JS -->
    <script src="modal.js"></script>
    <script>
        function menuToggle() {
            const toggleMenu = document.querySelector(".menu");
            toggleMenu.classList.toggle("active");
        }

    </script>

</body>
</html>
